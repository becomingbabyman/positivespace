<div class="container">

	<br/>
	<br/>
	<div ui-if='user.can_edit' class="row">
		<div class="offset4 span4">
			<h4> TODO: style profile and message </h4>
			<a ng-click='openUserEdit = true'>edit</a>
			<div modal="openUserEdit" close="openUserEdit = false" options="opts">
				<div class="modal-header">
					<h4>Edit Profile</h4>
				</div>
				<div class="modal-body">
					<edit-resource app='app', resource='user'></edit-resource>
				</div>
				<div class="modal-footer">
					<button class="btn cancel pull-left" ng-click="openUserEdit = false">Cancel</button>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="offset4 span4">
			name: {{user.name}} <br/>
			username: {{user.username}} <br/>
			location: {{user.location}} <br/>
			personal url: {{user.personal_url}} <br/>
			body: {{user.body}} <br/>
			achievements: {{user.achievements}} <br/>
		</div>
	</div>
	<br/>
	<br/>

	<div class="row">
		<div class="offset4 span4">
			<form name='message' class='form-vertical uncenter' ng-submit='submitMyMessage()' novalidate style='width: 100%;'>

				<control-group>
					<input type='email' name='email' id='msg_email' placeholder='your email address' class='input-block-level' ng-model='myMessage.from_email'></input>
				</control-group>

				<control-group>
					<textarea name='body' id='msg_body' title='message body' placeholder='message to {{user.username}}...' class='input-block-level' ng-model='myMessage.body' required></textarea>
				</control-group>

				<div ng-show='myMessage.id' class='control-group'>
					<div class='controls'>
						<div class="progress progress-striped active">
							<div class="bar bar-success" style="width: {{percentBeforeSend}}%;">{{roundedSecondsLeftToEdit}} seconds to review</div>
						</div>
					</div>
				</div>

				<div class='control-group'>
					<div class='controls'>
						<button ng-hide='myMessage.id' type='submit' class='btn btn-success pull-right'>Send</button>
						<button ng-show='myMessage.id && myMessage.seconds_left_to_edit > 0' type='submit' class='btn btn-success pull-right'>Save Edits</button>
						<button ng-show='myMessage.id && myMessage.seconds_left_to_edit <= 0' type='submit' class='btn btn-success pull-right' disabled>Message Sent</button>
					</div>
				</div>

			</form>
		</div>
	</div>

</div>
